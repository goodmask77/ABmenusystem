# 後台編輯欄位名稱功能建議

## 功能需求分析

您希望「後台模式」下可以編輯表單欄位的標籤名稱（例如「公司名稱」、「統一編號」等），並同步到 Supabase。

## 架構影響評估

### ✅ 可以實作（建議方案）

**方案 A：使用 Supabase 儲存欄位標籤配置**

1. **新增資料表** `field_labels`：
   ```sql
   CREATE TABLE public.field_labels (
       id serial primary key,
       field_key text not null unique,  -- 例如 'companyName', 'taxId'
       label_text text not null,        -- 顯示的標籤文字
       created_at timestamptz default now(),
       updated_at timestamptz default now()
   );
   ```

2. **實作方式**：
   - 在後台模式中，表單欄位的 `<label>` 變成可編輯
   - 點擊標籤可進入編輯模式
   - 儲存後更新 `field_labels` 表
   - 載入時從 Supabase 讀取自訂標籤，沒有則使用預設

3. **優點**：
   - 不影響現有資料結構
   - 可以為不同欄位設定不同標籤
   - 支援多語言擴展

4. **缺點**：
   - 需要新增資料表
   - 需要實作編輯 UI
   - 載入時需要額外查詢

### ⚠️ 需要考慮的問題

1. **歷史訂單列表的欄位標題**：
   - 如果只改表單標籤，歷史列表的欄位標題不會同步改變
   - 需要同時支援表單標籤和表格標題的編輯

2. **資料一致性**：
   - 如果不同使用者看到不同的欄位名稱，可能造成混淆
   - 建議：欄位名稱應該是「全域設定」，而不是「個人設定」

3. **向後相容性**：
   - 現有的訂單資料不會受影響（因為只改顯示標籤）
   - 但需要確保所有地方都使用統一的標籤來源

## 建議實作步驟

如果決定實作，建議：

1. **第一階段**：只實作表單欄位標籤編輯
   - 新增 `field_labels` 表
   - 實作編輯 UI（點擊標籤進入編輯模式）
   - 儲存到 Supabase

2. **第二階段**：同步歷史列表欄位標題
   - 歷史列表的 `<th>` 也從 `field_labels` 讀取
   - 確保表單和列表使用相同的標籤

3. **第三階段**：加入權限控制
   - 只有管理員可以編輯欄位名稱
   - 一般使用者看到的是管理員設定的標籤

## 替代方案

如果不想新增資料表，可以考慮：

- **使用 localStorage**：只在本地儲存自訂標籤（但無法跨裝置同步）
- **使用 Supabase 的 `menu_state`**：在現有表中加入欄位標籤配置（但會增加 payload 複雜度）

## 建議

**建議先不實作此功能**，原因：

1. 欄位名稱通常不需要頻繁變更
2. 新增資料表會增加系統複雜度
3. 如果未來需要，可以作為獨立功能模組加入

**如果確實需要**，建議採用「方案 A」，因為：
- 架構清晰
- 不影響現有資料
- 易於擴展（例如多語言支援）

