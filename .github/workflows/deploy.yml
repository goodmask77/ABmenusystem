name: è‡ªå‹•éƒ¨ç½²åˆ° Vercel

on:
  push:
    branches:
      - main
  workflow_dispatch:  # å…è¨±æ‰‹å‹•è§¸ç™¼

jobs:
  deploy:
    runs-on: ubuntu-latest
    
    steps:
      - name: ğŸ“¥ æª¢å‡ºç¨‹å¼ç¢¼
        uses: actions/checkout@v4

      - name: ğŸ“¦ è¨­ç½® Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'
          cache: 'npm'

      - name: ğŸ“¥ å®‰è£ä¾è³´
        run: |
          if [ -f "package.json" ]; then
            npm ci
          fi
          if [ -f "abmenusystem-app/package.json" ]; then
            cd abmenusystem-app && npm ci && cd ..
          fi

      - name: ğŸ” æª¢æŸ¥è®Šæ›´
        run: |
          echo "æª¢æŸ¥è®Šæ›´çš„æª”æ¡ˆ:"
          git diff --name-only HEAD~1 HEAD || true

      - name: âœ… éƒ¨ç½²æˆåŠŸé€šçŸ¥
        run: |
          echo "âœ… éƒ¨ç½²æµç¨‹å®Œæˆ"
          echo "Vercel æœƒè‡ªå‹•å¾ GitHub æ‹‰å–æœ€æ–°ç¨‹å¼ç¢¼ä¸¦éƒ¨ç½²"

